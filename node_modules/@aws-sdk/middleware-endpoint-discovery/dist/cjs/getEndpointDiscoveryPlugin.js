"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getEndpointDiscoveryOptionalPlugin = exports.getEndpointDiscoveryRequiredPlugin = exports.getEndpointDiscoveryPlugin = exports.endpointDiscoveryMiddlewareOptions = void 0;
const endpointDiscoveryMiddleware_1 = require("./endpointDiscoveryMiddleware");
exports.endpointDiscoveryMiddlewareOptions = {
    name: "endpointDiscoveryMiddleware",
    step: "build",
    tags: ["ENDPOINT_DISCOVERY"],
    override: true,
};
const getEndpointDiscoveryPlugin = (pluginConfig, middlewareConfig) => ({
    applyToStack: (commandStack) => {
        commandStack.add(endpointDiscoveryMiddleware_1.endpointDiscoveryMiddleware(pluginConfig, middlewareConfig), exports.endpointDiscoveryMiddlewareOptions);
    },
});
exports.getEndpointDiscoveryPlugin = getEndpointDiscoveryPlugin;
/**
 * @deprecated Use getEndpointDiscoveryPlugin
 */
const getEndpointDiscoveryRequiredPlugin = (pluginConfig, middlewareConfig) => ({
    applyToStack: (commandStack) => {
        commandStack.add(endpointDiscoveryMiddleware_1.endpointDiscoveryMiddleware(pluginConfig, { ...middlewareConfig, isDiscoveredEndpointRequired: true }), exports.endpointDiscoveryMiddlewareOptions);
    },
});
exports.getEndpointDiscoveryRequiredPlugin = getEndpointDiscoveryRequiredPlugin;
/**
 * @deprecated Use getEndpointDiscoveryPlugin
 */
const getEndpointDiscoveryOptionalPlugin = (pluginConfig, middlewareConfig) => ({
    applyToStack: (commandStack) => {
        commandStack.add(endpointDiscoveryMiddleware_1.endpointDiscoveryMiddleware(pluginConfig, { ...middlewareConfig, isDiscoveredEndpointRequired: false }), exports.endpointDiscoveryMiddlewareOptions);
    },
});
exports.getEndpointDiscoveryOptionalPlugin = getEndpointDiscoveryOptionalPlugin;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0RW5kcG9pbnREaXNjb3ZlcnlQbHVnaW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZ2V0RW5kcG9pbnREaXNjb3ZlcnlQbHVnaW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsK0VBQTRFO0FBRy9ELFFBQUEsa0NBQWtDLEdBQXdCO0lBQ3JFLElBQUksRUFBRSw2QkFBNkI7SUFDbkMsSUFBSSxFQUFFLE9BQU87SUFDYixJQUFJLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQztJQUM1QixRQUFRLEVBQUUsSUFBSTtDQUNmLENBQUM7QUFTSyxNQUFNLDBCQUEwQixHQUFHLENBQ3hDLFlBQWtFLEVBQ2xFLGdCQUFtRCxFQUM5QixFQUFFLENBQUMsQ0FBQztJQUN6QixZQUFZLEVBQUUsQ0FBQyxZQUFZLEVBQUUsRUFBRTtRQUM3QixZQUFZLENBQUMsR0FBRyxDQUFDLHlEQUEyQixDQUFDLFlBQVksRUFBRSxnQkFBZ0IsQ0FBQyxFQUFFLDBDQUFrQyxDQUFDLENBQUM7SUFDcEgsQ0FBQztDQUNGLENBQUMsQ0FBQztBQVBVLFFBQUEsMEJBQTBCLDhCQU9wQztBQUVIOztHQUVHO0FBQ0ksTUFBTSxrQ0FBa0MsR0FBRyxDQUNoRCxZQUFrRSxFQUNsRSxnQkFBeUYsRUFDcEUsRUFBRSxDQUFDLENBQUM7SUFDekIsWUFBWSxFQUFFLENBQUMsWUFBWSxFQUFFLEVBQUU7UUFDN0IsWUFBWSxDQUFDLEdBQUcsQ0FDZCx5REFBMkIsQ0FBQyxZQUFZLEVBQUUsRUFBRSxHQUFHLGdCQUFnQixFQUFFLDRCQUE0QixFQUFFLElBQUksRUFBRSxDQUFDLEVBQ3RHLDBDQUFrQyxDQUNuQyxDQUFDO0lBQ0osQ0FBQztDQUNGLENBQUMsQ0FBQztBQVZVLFFBQUEsa0NBQWtDLHNDQVU1QztBQUVIOztHQUVHO0FBQ0ksTUFBTSxrQ0FBa0MsR0FBRyxDQUNoRCxZQUFrRSxFQUNsRSxnQkFBeUYsRUFDcEUsRUFBRSxDQUFDLENBQUM7SUFDekIsWUFBWSxFQUFFLENBQUMsWUFBWSxFQUFFLEVBQUU7UUFDN0IsWUFBWSxDQUFDLEdBQUcsQ0FDZCx5REFBMkIsQ0FBQyxZQUFZLEVBQUUsRUFBRSxHQUFHLGdCQUFnQixFQUFFLDRCQUE0QixFQUFFLEtBQUssRUFBRSxDQUFDLEVBQ3ZHLDBDQUFrQyxDQUNuQyxDQUFDO0lBQ0osQ0FBQztDQUNGLENBQUMsQ0FBQztBQVZVLFFBQUEsa0NBQWtDLHNDQVU1QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJ1aWxkSGFuZGxlck9wdGlvbnMsIEh0dHBIYW5kbGVyT3B0aW9ucywgTWlkZGxld2FyZVN0YWNrLCBQbHVnZ2FibGUgfSBmcm9tIFwiQGF3cy1zZGsvdHlwZXNcIjtcblxuaW1wb3J0IHsgZW5kcG9pbnREaXNjb3ZlcnlNaWRkbGV3YXJlIH0gZnJvbSBcIi4vZW5kcG9pbnREaXNjb3ZlcnlNaWRkbGV3YXJlXCI7XG5pbXBvcnQgeyBFbmRwb2ludERpc2NvdmVyeVJlc29sdmVkQ29uZmlnLCBQcmV2aW91c2x5UmVzb2x2ZWQgfSBmcm9tIFwiLi9yZXNvbHZlRW5kcG9pbnREaXNjb3ZlcnlDb25maWdcIjtcblxuZXhwb3J0IGNvbnN0IGVuZHBvaW50RGlzY292ZXJ5TWlkZGxld2FyZU9wdGlvbnM6IEJ1aWxkSGFuZGxlck9wdGlvbnMgPSB7XG4gIG5hbWU6IFwiZW5kcG9pbnREaXNjb3ZlcnlNaWRkbGV3YXJlXCIsXG4gIHN0ZXA6IFwiYnVpbGRcIixcbiAgdGFnczogW1wiRU5EUE9JTlRfRElTQ09WRVJZXCJdLFxuICBvdmVycmlkZTogdHJ1ZSxcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW5kcG9pbnREaXNjb3ZlcnlNaWRkbGV3YXJlQ29uZmlnIHtcbiAgaXNEaXNjb3ZlcmVkRW5kcG9pbnRSZXF1aXJlZDogYm9vbGVhbjtcbiAgY2xpZW50U3RhY2s6IE1pZGRsZXdhcmVTdGFjazxhbnksIGFueT47XG4gIG9wdGlvbnM/OiBIdHRwSGFuZGxlck9wdGlvbnM7XG4gIGlkZW50aWZpZXJzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGdldEVuZHBvaW50RGlzY292ZXJ5UGx1Z2luID0gKFxuICBwbHVnaW5Db25maWc6IEVuZHBvaW50RGlzY292ZXJ5UmVzb2x2ZWRDb25maWcgJiBQcmV2aW91c2x5UmVzb2x2ZWQsXG4gIG1pZGRsZXdhcmVDb25maWc6IEVuZHBvaW50RGlzY292ZXJ5TWlkZGxld2FyZUNvbmZpZ1xuKTogUGx1Z2dhYmxlPGFueSwgYW55PiA9PiAoe1xuICBhcHBseVRvU3RhY2s6IChjb21tYW5kU3RhY2spID0+IHtcbiAgICBjb21tYW5kU3RhY2suYWRkKGVuZHBvaW50RGlzY292ZXJ5TWlkZGxld2FyZShwbHVnaW5Db25maWcsIG1pZGRsZXdhcmVDb25maWcpLCBlbmRwb2ludERpc2NvdmVyeU1pZGRsZXdhcmVPcHRpb25zKTtcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBnZXRFbmRwb2ludERpc2NvdmVyeVBsdWdpblxuICovXG5leHBvcnQgY29uc3QgZ2V0RW5kcG9pbnREaXNjb3ZlcnlSZXF1aXJlZFBsdWdpbiA9IChcbiAgcGx1Z2luQ29uZmlnOiBFbmRwb2ludERpc2NvdmVyeVJlc29sdmVkQ29uZmlnICYgUHJldmlvdXNseVJlc29sdmVkLFxuICBtaWRkbGV3YXJlQ29uZmlnOiBPbWl0PEVuZHBvaW50RGlzY292ZXJ5TWlkZGxld2FyZUNvbmZpZywgXCJpc0Rpc2NvdmVyZWRFbmRwb2ludFJlcXVpcmVkXCI+XG4pOiBQbHVnZ2FibGU8YW55LCBhbnk+ID0+ICh7XG4gIGFwcGx5VG9TdGFjazogKGNvbW1hbmRTdGFjaykgPT4ge1xuICAgIGNvbW1hbmRTdGFjay5hZGQoXG4gICAgICBlbmRwb2ludERpc2NvdmVyeU1pZGRsZXdhcmUocGx1Z2luQ29uZmlnLCB7IC4uLm1pZGRsZXdhcmVDb25maWcsIGlzRGlzY292ZXJlZEVuZHBvaW50UmVxdWlyZWQ6IHRydWUgfSksXG4gICAgICBlbmRwb2ludERpc2NvdmVyeU1pZGRsZXdhcmVPcHRpb25zXG4gICAgKTtcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBnZXRFbmRwb2ludERpc2NvdmVyeVBsdWdpblxuICovXG5leHBvcnQgY29uc3QgZ2V0RW5kcG9pbnREaXNjb3ZlcnlPcHRpb25hbFBsdWdpbiA9IChcbiAgcGx1Z2luQ29uZmlnOiBFbmRwb2ludERpc2NvdmVyeVJlc29sdmVkQ29uZmlnICYgUHJldmlvdXNseVJlc29sdmVkLFxuICBtaWRkbGV3YXJlQ29uZmlnOiBPbWl0PEVuZHBvaW50RGlzY292ZXJ5TWlkZGxld2FyZUNvbmZpZywgXCJpc0Rpc2NvdmVyZWRFbmRwb2ludFJlcXVpcmVkXCI+XG4pOiBQbHVnZ2FibGU8YW55LCBhbnk+ID0+ICh7XG4gIGFwcGx5VG9TdGFjazogKGNvbW1hbmRTdGFjaykgPT4ge1xuICAgIGNvbW1hbmRTdGFjay5hZGQoXG4gICAgICBlbmRwb2ludERpc2NvdmVyeU1pZGRsZXdhcmUocGx1Z2luQ29uZmlnLCB7IC4uLm1pZGRsZXdhcmVDb25maWcsIGlzRGlzY292ZXJlZEVuZHBvaW50UmVxdWlyZWQ6IGZhbHNlIH0pLFxuICAgICAgZW5kcG9pbnREaXNjb3ZlcnlNaWRkbGV3YXJlT3B0aW9uc1xuICAgICk7XG4gIH0sXG59KTtcbiJdfQ==